<div class="row" itemscope itemtype="http://schema.org/Product">
  <meta itemprop="url" content="{{ shop.url }}{{ product.url }}">
  <meta itemprop="image" content="{{ product.featured_image.src | img_url: 'grande' }}" />
  <header class="hero" style="background-image:url({{ product.featured_image.src | img_url: 'master' }})"></header>

  <div class="well cell">
    <div class="layout">
      <article class="layout-body">
        <div class="well--l"><h1 itemprop="name">{{ product.title }}</h1></div>
        <div itemprop="description">
          {{ product.description }}
        </div>
        <div class="well">
          <form action="/cart/add" method="post" enctype="multipart/form-data">
            {% if product.type == "Coffee Beans" %}
            <fieldset class="well">
              <legend>Size</legend>
              <div class="switchboard switchboard--light">
                <input id="size_sm" type="radio" name="size" class="switchboard-switch" checked value="12">
                <label for="size_sm" class="switchboard-label">
                  <div><svg aria-label="12oz Bag" class="icon icon--bag" role="img"><use xlink:href="#icon_bag"></use></svg></div>
                  12oz<small class="mt025">Individual / Family</small>
                </label>
                <input id="size_lg" type="radio" name="size" class="switchboard-switch" value="80">
                <label for="size_lg" class="switchboard-label">
                  <div><svg aria-label="5lb Wholesale Bag" class="icon icon--bag" role="img"><use xlink:href="#icon_wholesale"></use></svg></div>
                  5lb<small class="mt025">Wholesale</small>
                </label>
              </div>
            </fieldset>

            <div itemprop="offers" itemscope itemtype="http://schema.org/Offer">
              <meta itemprop="priceCurrency" content="{{ shop.currency }}">
              <link itemprop="availability" href="http://schema.org/{% if product.available %}InStock{% else %}OutOfStock{% endif %}">
              <span itemprop="price">{{ product.selected_variant.price }}</span>

              {% if product.compare_at_price_max > product.price %}
              <span class="visually-hidden">{{ 'products.general.sale_price' | t }}</span>
              <p id="ComparePrice">
                {{ 'products.product.compare_at' | t }} {{ current_variant.compare_at_price | money }}
              </p>
              {% endif %}
            </div>

            <fieldset class="well">
              <legend>Quantity</legend>
              <div class="switchboard">
                {% for i in (1..5) %}
                <input id="quantity_{{ i }}" type="radio" {% if forloop.first %}checked {% endif %}name="quantity" class="switchboard-switch" value="{{ i }}">
                <label for="quantity_{{ i }}" class="switchboard-label">{{ i }}<small>{{ i | pluralize: 'bag', 'bags' }}</small></label>
                {% endfor %}
              </div>
            </fieldset>
            {% endif %}

            <select name="id" id="product_variants">
              {% for variant in product.variants %}
                {% if variant.available %}
                  <option {% if variant == product.selected_or_first_available_variant %} selected="selected" {% endif %} data-sku="{{ variant.sku }}" value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option>
                {% else %}
                  <option disabled="disabled">{{ variant.title }} - {{ 'products.product.sold_out' | t }}</option>
                {% endif %}
              {% endfor %}
            </select>

            <div class="well well--l tac">
              <button type="submit" name="add" id="AddToCart" class="button button--l">
                <span id="AddToCartText">{{ 'products.product.add_to_cart' | t }}</span>
              </button>
            </div>

          </form>
        </div>
      </article>
      <aside class="layout-aside">
        {% if product.type == "Coffee Beans" %}
        {% assign score = product.metafields.c_f.score %}
        {% include 'score' %}
        <h4 class="tac mb0 mt1">Roast Info</h4>
        <table class="data mt05">
          <tbody>
            {% if product.metafields.c_f.country %}
            <tr class="data-row">
              <td class="data-term">Country</td>
              <td class="data-value">{{ product.metafields.c_f.country }}</td>
            </tr>
          {% endif %}
          {% if product.metafields.c_f.region %}
            <tr class="data-row">
              <td class="data-term">Region</td>
              <td class="data-value">{{ product.metafields.c_f.region }}</td>
            </tr>
            {% endif %}
            {% if product.metafields.c_f.grower %}
            <tr class="data-row">
              <td class="data-term">Grower</td>
              <td class="data-value">{{ product.metafields.c_f.grower }}</td>
            </tr>
            {% endif %}
            {% if product.metafields.c_f.altitude %}
            <tr class="data-row">
              <td class="data-term">Altitude</td>
              <td class="data-value">{{ product.metafields.c_f.altitude | round }}m</td>
            </tr>
            {% endif %}
            {% if product.metafields.c_f.variety %}
            <tr class="data-row">
              <td class="data-term">Variety</td>
              <td class="data-value">{{ product.metafields.c_f.variety }}</td>
            </tr>
            {% endif %}
            {% if product.metafields.c_f.processing_method %}
            <tr class="data-row">
              <td class="data-term">Processing Method</td>
              <td class="data-value">{{ product.metafields.c_f.processing_method }}</td>
            </tr>
            {% endif %}
          </tbody>
        </table>
        <h4 class="tac mt1">Flavor Profile</h4>
        <div class="tac">{% include 'notes' %}</div>
        {% endif %}
      </aside>
    </div>
  </div>

  <div class="cell well">
    <div class="has-card">
      {% assign this_product = product %}
      {% assign related_1 = product.metafields.c_f.related_product_1 %}
      {% assign related_2 = product.metafields.c_f.related_product_2 %}
      {% assign opposite = product.metafields.c_f.opposite %}

      {% if related_1  %}
      {% capture label %}Similar to {{ product.title }}{% endcapture %}
      {% assign product = all_products[related_1] %}
      {% assign modifier = 's' %}
      {% include 'product-card' %}
      {% endif %}

      {% if related_2 %}
      {% assign product = all_products[related_2] %}
      {% assign label = '&nbsp;' %}
      {% assign modifier = 's' %}
      {% include 'product-card' %}
      {% endif %}

      {% if opposite %}
      {% assign product = all_products[opposite] %}
      {% assign label = 'Opposite' %}
      {% assign modifier = 's' %}
      {% include 'product-card' %}
      {% endif %}
    </div>
  </div>
  <div class="cell well tac">
    <a href="{{ this_product.collections[0].url }}" class="button">See All {{ this_product.collections[0].title }}</a>
  </div>
</div>
